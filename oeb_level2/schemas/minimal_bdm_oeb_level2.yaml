$id: https://github.com/inab/benchmarking/minimal-json-schemas
$schema: http://json-schema.org/draft-07/schema#
title: Minimal dataset concept (ELIXIR-EXCELERATE WP2 Benchmarking schemas)
type: array
minItems: 1
items:
  oneOf:
  - $ref: '#/$defs/MinEntry'
  - $ref: '#/$defs/ChallengeParticipants'
  - $ref: '#/$defs/AggregationEntry'
  #$ref: '#/$defs/MinEntry'
  #$ref: '#/$defs/AggregationEntry'
  
$defs:
  ChallengeParticipants:
    type: object
    properties:
      id:
        title: The challenge acronym
        type: string
      participants:
        title: The list of participants
        type: array
        items:
          type: string
        uniqueItems: true
        minItems: 1
    required:
    - id
    - participants
  MinEntry:
    type: object
    properties:
      _id:
        title: The unique community-set id of the dataset
        type: string
      challenge_id:
        title: The challenge(s) where this dataset was generated or used
        oneOf:
        - type: array
          items:
            type: string
            minLength: 1
#            foreign_keys:
#            - members:
#              - .
#              schema_id: https://www.elixir-europe.org/excelerate/WP2/json-schemas/1.0/Challenge
          minItems: 1
        - type: string
          minLength: 1
#          foreign_keys:
#          - members:
#            - .
#            schema_id: https://www.elixir-europe.org/excelerate/WP2/json-schemas/1.0/Challenge
      community_id:
        title: The community where this dataset was generated or used
        type: string
        description: The name or OEB official id for the community which used or generated
          the dataset
        minLength: 1
#        foreign_keys:
#        - members:
#          - .
#          schema_id: https://www.elixir-europe.org/excelerate/WP2/json-schemas/1.0/Community
      datalink:
        title: The data itself
        type: object
        properties:
          attrs:
            title: 'Attributes describing the datalink: whether it is inline (i.e.
              a data URI); a CURIE; whether it is compressed, or an archive (tar,
              zip, rar), a metalink (RFC 5854, RFC 6249, https://en.wikipedia.org/wiki/Metalink)
              or a standard sums (MD5, SHA1) file'
            type: array
            anyOf:
            - items:
                enum:
                - inline
                - compressed
                - archive
                - metalink
                - sums
                type: string
            - items:
                enum:
                - curie
                - compressed
                - archive
                - metalink
                type: string
            minItems: 1
            uniqueItems: true
          status:
            title: Last validation status (unreachable content, missing content(404),
              interrupted while validating, corrupted (checksums, not all the contents
              available, etc...), ok)
            type: string
            enum:
            - unreachable
            - missing
            - interrupted
            - corrupted
            - ok
          validation_date:
            title: Last validation date of the datalink
            type: string
            format: date-time
        additionalProperties: false
        required:
        - validation_date
        - status
      metrics:
        title: The computed metrics stored as inline data
        type: object
        properties:
          metric_id:
            title: the OEB official id / name of the metric
            type: string
            minLength: 1
#            foreign_keys:
#            - members:
#              - .
#              schema_id: https://www.elixir-europe.org/excelerate/WP2/json-schemas/1.0/Metrics
          stderr:
            title: the standard error / deviation for the metric (if exists)
            type: number
            minLength: 1
          value:
            title: the numerical value of the metric
            type: number
            minLength: 1
        required:
        - metric_id
        - value
      participant_id:
        title: The id / name of the tool which generated this dataset
        type: string
        minLength: 1
#        foreign_keys:
#        - members:
#          - .
#          schema_id: https://www.elixir-europe.org/excelerate/WP2/json-schemas/1.0/Tool
      type:
        title: Type of dataset.
        type: string
        enum:
        - participant
        - assessment
        mingLength: 1
    additionalProperties: false
    required:
    - _id
    - community_id
    - challenge_id
    - type
    - participant_id
    primary_key:
    - _id
    dependencies: {}
  AggregationEntry:
    type: object
    properties:
      _id:
        title: The unique community-set id of the dataset
        type: string
      challenge_ids:
        title: The challenge(s) where this dataset was generated or used
        type: array
        items:
          type: string
          minLength: 1
#          foreign_keys:
#          - members:
#            - .
#            schema_id: https://www.elixir-europe.org/excelerate/WP2/json-schemas/1.0/Challenge
        minItems: 1
      community_id:
        title: The community where this dataset was generated or used
        type: string
        description: The name or OEB official id for the community which used or generated
          the dataset
        minLength: 1
#        foreign_keys:
#        - members:
#          - .
#          schema_id: https://www.elixir-europe.org/excelerate/WP2/json-schemas/1.0/Community
      datalink:
        title: The aggregation data itself
        type: object
        properties:
          inline_data:
            title: The aggregation data is provided inline
            type: object
      type:
        title: Type of dataset.
        type: string
        const: aggregation
    additionalProperties: false
    required:
    - _id
    - challenge_ids
    - type
    - datalink
#    primary_key:
#    - _id
    dependencies: {}

